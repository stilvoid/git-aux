# Maintainer: Steve Engledow <steve at offend dot me dot uk>
pkgname='git-aux-git'
pkgver=0.1
pkgrel=2
pkgdesc="Use git to manage often-replicated files across computers"
arch=('i686' 'x86_64')
url="https://github.com/stilvoid/git-aux"
license=('MIT')
depends=('nodejs' 'git')
noextract=()
md5sums=() #generate with 'makepkg -g'

build() {
  cd "$srcdir"

  if [ -d git-aux ]; then
    cd git-aux
    git checkout master
    git pull
  else
    git clone git://github.com/stilvoid/git-aux.git git-aux
  fi
}

package() {
  cd "$srcdir/git-aux"
  install -Dm755 ${srcdir}/git-aux/git-aux.js "${pkgdir}/usr/lib/$pkgname/git-aux.js"
  cp -a ${srcdir}/git-aux/lib "${pkgdir}/usr/lib/$pkgname/"
  mkdir -p "${pkgdir}/usr/bin"
  cd "${pkgdir}/usr/bin"
  ln -s "../lib/$pkgname/git-aux.js" ./git-aux
}
